<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>TA Servers (demo)</title>
    <meta property="og:title" content="TA Servers">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta property="og:description" content="">
    <meta name="author" content="Giga">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="TA Servers">
    <meta property="og:image" content="">
    <meta property="og:url" content="https://servers.wilderzone.live/">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#ffffff">
    <link rel="shortcut icon" href="icons/dns_black_24dp.svg">
    <link rel="stylesheet" href="css/style.css">
  </head>
  
  <body>
    <main>
      <div id="navbar">
        <a href="" class="logo"><img src="icons/dns_black_24dp.svg" draggable="false" alt=""><div class="title">TA Servers</div></a>
        
        <div class="navlinks">
          <a href="" class="activeNav"><p>Server List</p><div></div></a>
          <a href="schedules/"><p>Schedules</p><div></div></a>
          <a href="about/"><p>About</p><div></div></a>
          <a href="login/" style="float: right;" id="loginButton"><p>Login<img src="icons/login_black_24dp.svg" draggable="false" alt=""></p></a>
        </div>
      </div>
      
      <img class="refresh" src="icons/refresh_black_24dp.svg" draggable="false" title="Refresh" alt="Refresh" onclick="emptyPage2();getServerData()">
      
      <div id="pageContent">
        <div class="alert alert_info" style="width:calc(100% - 50px);"><img src="icons/groups-24px.svg" draggable="false" alt=""><p>Loading...</p></div>
        
        <div class="heading">Griffon's Servers:</div>
        <div id="GRIF" class="contentSection emptySection loading">
          <div class="serverItem emptySection">
          </div>
        </div>
        
        <div class="heading">Chicken's Servers:</div>
        <div id="CHKN" class="contentSection emptySection loading">
          <div class="serverItem emptySection">
          </div>
        </div>
        
        <div class="heading">Dodge's Servers:</div>
        <div id="DODG" class="contentSection emptySection loading">
          <div class="serverItem emptySection">
          </div>
        </div>
        
        <div class="heading">Giga's Servers:</div>
        <div id="GIGA" class="contentSection emptySection loading">
          <div class="serverItem emptySection">
          </div>
        </div>
        
        <div class="heading">Other Servers:</div>
        <div id="OTHR" class="contentSection emptySection loading">
          <div class="serverItem emptySection">
          </div>
        </div>
      </div>
    </main>
    
    <footer>
      <p>Designed&nbsp;by&nbsp;Gigabyte5671&nbsp;&copy;2021&nbsp;|&nbsp;Gigabyte#3310&nbsp;|&nbsp;Thanks&nbsp;for&nbsp;your&nbsp;support<img src="icons/heart-24px.svg" draggable="false" alt=""></p>
    </footer>
  </body>
  
  <script>console.log("Site Version: 0.12");</script>
  <script src="lib/jquery.min.js"></script>
  <script src="lib/cookieManager.min.js"></script>
  <script src="lib/statusURL.js"></script>
  <script src="lib/updateServerList.js"></script>
  <script>if(checkCookie("arl") === true){$("#loginButton").attr("href", "admin/");$("#loginButton").children().first().html('Admin<img src="icons/account_circle_24dp.svg" draggable="false" alt="">');}</script>
  <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-auth.js"></script>
  <script>
    var firebaseConfig = {
      apiKey: "AIzaSyAoPP3TsoDuLuaRCp8jxHSB9G8Vg-MxHIA",
      authDomain: "wilderzone-servers.firebaseapp.com",
      projectId: "wilderzone-servers",
      storageBucket: "wilderzone-servers.appspot.com",
      messagingSenderId: "1030252903714",
      appId: "1:1030252903714:web:c76866f993669affe9797b"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
  </script>
  <script>
    var rdata;
    var sdata;
    function getServerData(){
      $.ajax({
        dataType:"json",
        url:"registered_servers.json",
        cache:false,
        success:function(data1){
          rdata = data1;
          $.ajax({
            dataType:"json",
            url:statusURL,
            cache:false,
            success:function(data2){
              sdata = data2;
              emptyPage1();
              $(".contentSection").removeClass("loading");
              $(".contentSection").removeClass("emptySection");
              updateServerList();
              updateCurrentlyOnline();
            },
            error:function(xhr, status, err){
              console.log("Error " + xhr.status);
              $(".alert").children(":nth-child(2)").html("Error: " + xhr.status);
              $(".alert").children(":nth-child(1)").attr("src", "icons/cancel_24dp.svg");
              $(".alert").addClass("alert_error");
              
              $("#pageContent").empty();
              var item = '<h2 style="margin-top:100px;text-align:center;">Server data couldn&#39;t be retrieved. Please try again later.</h2>';
              $("#pageContent").append(item);
            }
          });
        },
        error:function(xhr, status, err){
          console.log("Error " + xhr.status);
          $(".alert").children(":nth-child(2)").html("Error: " + xhr.status);
          $(".alert").children(":nth-child(1)").attr("src", "icons/cancel_24dp.svg");
          $(".alert").addClass("alert_error");
          
          $("#pageContent").empty();
          var item = '<h2 style="margin-top:100px;text-align:center;">Server data couldn&#39;t be retrieved. Please try again later.</h2>';
          $("#pageContent").append(item);
        }
      });
    }
    getServerData();
    
    function emptyPage1(){
      $("#GRIF").empty();
      $("#CHKN").empty();
      $("#DODG").empty();
      $("#GIGA").empty();
      $("#OTHR").empty();
    }
    function emptyPage2(){
      $("#GRIF").empty();
      $("#GRIF").append('<div class="serverItem emptySection"></div>');
      $("#CHKN").empty();
      $("#CHKN").append('<div class="serverItem emptySection"></div>');
      $("#DODG").empty();
      $("#DODG").append('<div class="serverItem emptySection"></div>');
      $("#GIGA").empty();
      $("#GIGA").append('<div class="serverItem emptySection"></div>');
      $("#OTHR").empty();
      $("#OTHR").append('<div class="serverItem emptySection"></div>');
    }
  </script>
</html>